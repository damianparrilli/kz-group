---
import InjItem1 from "../../icons/inyeccion/Item1Icon.astro";
import InjItem2 from "../../icons/inyeccion/Item2Icon.astro";
import InjItem3 from "../../icons/inyeccion/Item3Icon.astro";
import InjItem4 from "../../icons/inyeccion/Item4Icon.astro";
import InjItem5 from "../../icons/inyeccion/Item5Icon.astro";
import InjItem6 from "../../icons/inyeccion/Item6Icon.astro";

import MatItem1 from "../../icons/matriceria/Item1Icon.astro";
import MatItem2 from "../../icons/matriceria/Item2Icon.astro";
import MatItem3 from "../../icons/matriceria/Item3Icon.astro";
import MatItem4 from "../../icons/matriceria/Item4Icon.astro";
import MatItem5 from "../../icons/matriceria/Item5Icon.astro";
import MatItem6 from "../../icons/matriceria/Item6Icon.astro";

import DispItem1 from "../../icons/dispositivos/Item1Icon.astro";
import DispItem2 from "../../icons/dispositivos/Item2Icon.astro";
import DispItem3 from "../../icons/dispositivos/Item3Icon.astro";
import DispItem4 from "../../icons/dispositivos/Item4Icon.astro";
import DispItem5 from "../../icons/dispositivos/Item5Icon.astro";
import DispItem6 from "../../icons/dispositivos/Item6Icon.astro";



const { t, servicesId } = Astro.props as {
  t: Record<string, string>;
  servicesId: 'inyeccion' | 'matriceria' | 'dispositivos';
};

// Mapa de componentes por serviceId + itemN
const iconSets = {
  inyeccion: {
    item1: InjItem1,
    item2: InjItem2,
    item3: InjItem3,
    item4: InjItem4,
    item5: InjItem5,
    item6: InjItem6,
    // item4: InjItem4, item5: InjItem5, item6: InjItem6
  },
  matriceria: {
    item1: MatItem1,
    item2: MatItem2,
    item3: MatItem3,
    item4: MatItem4,
    item5: MatItem5,
    item6: MatItem6,
  },
  dispositivos: {
    item1: DispItem1,
    item2: DispItem2,
    item3: DispItem3,
    item4: DispItem4,
    item5: DispItem5,
    item6: DispItem6,
  },
} as const;

const icons = iconSets[servicesId] ?? {};

const keys = ['item1','item2','item3','item4','item5','item6'];
const entries = keys.filter((k) => typeof t?.[k] === 'string' && t[k]?.trim());


---

<section id="benefits" class="py-48 px-[20px] bg-oscuro w-full h-full">
  <div
    class="max-w-[1200px] mx-auto flex flex-col justify-center items-center gap-24 text-center
           [animation-iteration-count:infinite] delay-[200ms] duration-[500ms]
           taos:translate-y-[-200px] taos:opacity-0"
    data-taos-offset="0"
  >
    <h2 class="text-3xl font-bold">{t.title}</h2>

    <div
      class="flex w-full justify-evenly items-start flex-wrap gap-16 md:gap-x-8 md:gap-y-16 h-full"
    >
      {
        entries.map((key, i) => {
          const Icon = icons[key as keyof typeof icons]; 
          return (
            <div
              class={`w-72 h-full px-5 flex flex-col justify-center items-center gap-4
                      [animation-iteration-count:infinite] delay-[100ms] duration-[400ms]
                      taos:translate-y-[200px] taos:opacity-0
                      md:delay-[200ms] md:duration-[400ms]`}
              data-taos-offset="0"
            >
              {/* @ts-ignore */}
              {Icon ? <Icon class="w-12 h-auto" /> : null}
              <h3 class="text-xl font-medium">{t[key]}</h3>
            </div>
          );
        })
      }
    </div>
  </div>
</section>

<style>
  #benefits {
    clip-path: polygon(0 5%, 100% 0, 100% 100%, 0 95%);
  }
</style>
